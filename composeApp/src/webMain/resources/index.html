<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JobNav</title>
  <link type="text/css" rel="stylesheet" href="styles.css">
  <script>
    // Firebase SDK를 동적으로 로드
    (async () => {
      const { initializeApp } = await import("https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js");
      const {
        getAuth,
        signInWithEmailAndPassword,
        createUserWithEmailAndPassword,
        sendPasswordResetEmail,
      } = await import("https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js");

      // 전역 스코프에 함수들을 노출
      window.firebaseInit = (apiKey, authDomain, projectId, appId) => {
        const config = { apiKey, authDomain, projectId, appId };
        const app = initializeApp(config);
        window.__fbApp = app;
        window.__fbAuth = getAuth(app);
      };

      window.firebaseSignInEmail = async (email, password) => {
        const cred = await signInWithEmailAndPassword(window.__fbAuth, email, password);
        // 콘솔 출력
        console.log("✅ Firebase 로그인 성공");
        console.log("사용자 정보:", cred.user);
        console.log("UID:", cred.user?.uid);
        return cred.user?.uid ?? "";
      };

      window.firebaseSignUpEmail = async (email, password) => {
        const cred = await createUserWithEmailAndPassword(window.__fbAuth, email, password);
        return cred.user?.uid ?? "";
      };

      window.firebaseSendReset = async (email) => {
        await sendPasswordResetEmail(window.__fbAuth, email);
      };
    })();
  </script>
</head>

<body>
  <script type="application/javascript" src="composeApp.js"></script>
</body>

</html>